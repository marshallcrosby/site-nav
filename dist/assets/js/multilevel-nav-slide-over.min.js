/*!
    * Multilevel nav slide over extension v2.0.0.0 Beta
    */
class MultilevelSlideOver{keydownHandler=null;focusBeforeOffCanvas=null;settings={};constructor(e,t={}){this.settings={slideTitles:!0,slideTitleLink:!1,backButtonSymbol:"&lsaquo;",dynamicBackButtonTitle:!1,offCanvasCloseAllMenus:!1,...t},this.init(e)}init(e){return"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e instanceof NodeList&&(e=Array.from(e)),e.forEach(e=>this.setupElement(e)),e}isVisible(e){const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&null!==e.offsetParent}getTabbableElements(e){return Array.from(e.querySelectorAll(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex="0"]',"[contenteditable]"])).filter(e=>this.isVisible(e)&&e.tabIndex>=0)}slideOverKeyboardTrap(e){const t=e.closest(".l-off-canvas")||e;this.focusBeforeOffCanvas=document.activeElement,this.keydownHandler=e=>{if("Tab"===e.key){const l=this.getTabbableElements(t),n=l[0],i=l[l.length-1];if(0===l.length)return void e.preventDefault();e.shiftKey&&document.activeElement===n?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus())}},t.addEventListener("keydown",this.keydownHandler);const l=this.getTabbableElements(t)[0];!document.querySelector(".mln__list .active")&&l&&l.focus()}removeTrapKeyboardHandlers(e){this.keydownHandler&&(e.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null)}closeAllChildren(e){if(e.classList.contains("mln--navbar-slide-over")){e.querySelectorAll('[aria-hidden="false"]').forEach(e=>{e.setAttribute("aria-hidden","true"),e.classList.remove("mln--height-auto","mln__child--overflow-visible")}),e.querySelectorAll(".mln__visible-menu").forEach(e=>{e.classList.remove("mln__visible-menu")});const t=e.querySelector(".mln__list");t&&t.classList.add("mln__visible-menu"),e.querySelectorAll('[aria-expanded="true"]').forEach(e=>{e.setAttribute("aria-expanded","false");const t=e.closest(".mln__has-child--showing");t&&t.classList.remove("mln__has-child--showing")}),e.style.minHeight=""}}setDynamicHeight(e){e.querySelectorAll(".mln__child__collapse").forEach(e=>{e.style.minHeight=""});const t=e.querySelectorAll(".mln__has-child.mln__has-child--showing"),l=t[t.length-1]||null;let n=null,i=null;if(l){n=l.closest(".mln__child__collapse");const e=l.querySelector(":scope > .mln__child__collapse");e&&(i=e.querySelector(":scope > .mln__child__collapse__helper"))}const s=i||e.querySelector(".mln__list"),a=s?s.offsetHeight:0;e.style.minHeight=a+"px",n&&(n.style.minHeight=a+"px")}setupElement(e){const t=e.getAttribute("data-mln-breakpoint")?parseInt(e.getAttribute("data-mln-breakpoint")):void 0;if(e.querySelectorAll(".mln__has-child").forEach(e=>{const t=e.querySelector(".mln__child__collapse");if(!t)return;const l=t.getAttribute("id"),n=t.querySelector(".mln__child__collapse__helper"),i=e.querySelector(".mln__child-controls > a");if(!n||!i)return;const s=i.innerHTML,a=this.settings.backButtonSymbol?`<span aria-hidden="true">${this.settings.backButtonSymbol}</span> `:"",o=i.getAttribute("data-mln-not-linkable")||this.settings.dynamicBackButtonTitle?`${a}${i.textContent}`:`${a}Back`,r=document.createElement("div");r.className="mln__slide-over-controls",n.insertBefore(r,n.firstChild);const c=document.createElement("button");if(c.className="mln__back-btn",c.setAttribute("type","button"),c.setAttribute("aria-controls",l),c.innerHTML=o,r.appendChild(c),this.settings.slideTitles&&!this.settings.slideTitleLink){const e=document.createElement("span");e.className="mln__slide-over-title",e.innerHTML=s,r.appendChild(e)}if(this.settings.slideTitles&&this.settings.slideTitleLink){const e=i.cloneNode(!0);e.classList.add("mln__slide-over-title"),e.classList.remove("mln__toggle-link"),e.removeAttribute("role"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls");const t=e.querySelector(".mln__toggle-indicator");t&&t.remove(),r.appendChild(e)}c.addEventListener("click",()=>{const t=e.querySelector(`.mln__toggle-btn[aria-controls="${l}"], .mln__toggle-link[aria-controls="${l}"]`);if(t){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});t.dispatchEvent(e)}})}),e.addEventListener("show.mln.child",()=>{(e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(max-width: ${t-1}px)`).matches||void 0===t)&&this.setDynamicHeight(e)}),e.addEventListener("hide.mln.child",()=>{(e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(max-width: ${t-1}px)`).matches||void 0===t)&&this.setDynamicHeight(e)}),e.addEventListener("shown.mln.child",()=>{const l=e.querySelectorAll(".mln__has-child--showing");if(l.length){const n=l[l.length-1];n.classList.add("mln__has-child--active");const i=n.querySelector(".mln__child__collapse");i&&(this.removeTrapKeyboardHandlers(i),e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(max-width: ${t-1}px)`).matches&&this.slideOverKeyboardTrap(i))}}),this.settings.offCanvasCloseAllMenus){document.querySelectorAll("[data-oc-toggle], [data-oc-close]").forEach(t=>{t.addEventListener("click",()=>{"true"===t.getAttribute("aria-expanded")&&document.addEventListener("hidden.offCanvas",()=>{this.closeAllChildren(e)},{once:!0})})})}this.setDynamicHeight(e),window.addEventListener("mlnResizeEnd",()=>{if(e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(min-width: ${t}px)`).matches){const t=e.closest(".l-off-canvas")||e.querySelector(".mln__child__collapse");t&&this.removeTrapKeyboardHandlers(t),e.style.minHeight=""}else this.setDynamicHeight(e)})}}const multilevelNavSlideOver=(e,t)=>{const l=document.querySelectorAll(e),n=[];return l.forEach(e=>{n.push(new MultilevelSlideOver(e,t))}),n};"undefined"!=typeof jQuery&&(jQuery.fn.multilevelNavSlideOver=function(e){return this.each(function(){new MultilevelSlideOver(this,e)})});//# sourceMappingURL=multilevel-nav-slide-over.min.js.map
