/*!
  * Multilevel nav slide over extension v2.0.0.0 Beta
  */
const isVisible=e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&null!==e.offsetParent},getTabbableElements=e=>Array.from(e.querySelectorAll(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'[tabindex="0"]',"[contenteditable]"])).filter(e=>isVisible(e)&&e.tabIndex>=0);let keydownHandler=null;const slideOverKeyboardTrap=e=>{const t=e.closest(".l-off-canvas")||e;focusBeforeOffCanvas=document.activeElement,keydownHandler=e=>{if("Tab"===e.key){const l=getTabbableElements(t),n=l[0],i=l[l.length-1];if(0===l.length)return void e.preventDefault();e.shiftKey&&document.activeElement===n?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus())}},t.addEventListener("keydown",keydownHandler);const l=getTabbableElements(t)[0];!document.querySelector(".mln__list .active")&&l&&l.focus()},removeTrapKeyboardHandlers=e=>{keydownHandler&&(e.removeEventListener("keydown",keydownHandler),keydownHandler=null)},multilevelSlideOverSetup=(e,t={})=>{"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));const l={slideTitles:!0,slideTitleLink:!1,backButtonSymbol:"&lsaquo;",dynamicBackButtonTitle:!1,offCanvasCloseAllMenus:!1,...t};return e.forEach(e=>{const t=e.getAttribute("data-mln-breakpoint")?parseInt(e.getAttribute("data-mln-breakpoint")):void 0,n=()=>{e.querySelectorAll(".mln__child__collapse").forEach(e=>{e.style.minHeight=""});const t=e.querySelectorAll(".mln__has-child.mln__has-child--showing"),l=t[t.length-1]||null;let n=null,i=null;if(l){n=l.closest(".mln__child__collapse");const e=l.querySelector(":scope > .mln__child__collapse");e&&(i=e.querySelector(":scope > .mln__child__collapse__helper"))}const a=i||e.querySelector(".mln__list"),o=a?a.offsetHeight:0;e.style.minHeight=o+"px",n&&(n.style.minHeight=o+"px")};if(e.querySelectorAll(".mln__has-child").forEach(e=>{const t=e.querySelector(".mln__child__collapse");if(!t)return;const n=t.getAttribute("id"),i=t.querySelector(".mln__child__collapse__helper"),a=e.querySelector(".mln__child-controls > a");if(!i||!a)return;const o=a.innerHTML,s=l.backButtonSymbol?`<span aria-hidden="true">${l.backButtonSymbol}</span> `:"",r=a.getAttribute("data-mln-not-linkable")||l.dynamicBackButtonTitle?`${s}${a.textContent}`:`${s}Back`,c=document.createElement("div");c.className="mln__slide-over-controls",i.insertBefore(c,i.firstChild);const d=document.createElement("button");if(d.className="mln__back-btn",d.setAttribute("type","button"),d.setAttribute("aria-controls",n),d.innerHTML=r,c.appendChild(d),l.slideTitles&&!l.slideTitleLink){const e=document.createElement("span");e.className="mln__slide-over-title",e.innerHTML=o,c.appendChild(e)}if(l.slideTitles&&l.slideTitleLink){const e=a.cloneNode(!0);e.classList.add("mln__slide-over-title"),e.classList.remove("mln__toggle-link"),e.removeAttribute("role"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls");const t=e.querySelector(".mln__toggle-indicator");t&&t.remove(),c.appendChild(e)}d.addEventListener("click",()=>{const t=e.querySelector(`.mln__toggle-btn[aria-controls="${n}"], .mln__toggle-link[aria-controls="${n}"]`);if(t){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});t.dispatchEvent(e)}})}),e.addEventListener("show.mln.child",()=>{(e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(max-width: ${t-1}px)`).matches||void 0===t)&&n()}),e.addEventListener("hide.mln.child",()=>{(e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(max-width: ${t-1}px)`).matches||void 0===t)&&n()}),e.addEventListener("shown.mln.child",()=>{const l=e.querySelectorAll(".mln__has-child--showing");if(l.length){const n=l[l.length-1];n.classList.add("mln__has-child--active");const i=n.querySelector(".mln__child__collapse");i&&(removeTrapKeyboardHandlers(i),e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(max-width: ${t-1}px)`).matches&&slideOverKeyboardTrap(i))}}),l.offCanvasCloseAllMenus){document.querySelectorAll("[data-oc-toggle], [data-oc-close]").forEach(t=>{t.addEventListener("click",()=>{"true"===t.getAttribute("aria-expanded")&&document.addEventListener("hidden.offCanvas",function t(){(()=>{if(e.classList.contains("mln--navbar-slide-over")){e.querySelectorAll('[aria-hidden="false"]').forEach(e=>{e.setAttribute("aria-hidden","true"),e.classList.remove("mln--height-auto","mln__child--overflow-visible")}),e.querySelectorAll(".mln__visible-menu").forEach(e=>{e.classList.remove("mln__visible-menu")});const t=e.querySelector(".mln__list");t&&t.classList.add("mln__visible-menu"),e.querySelectorAll('[aria-expanded="true"]').forEach(e=>{e.setAttribute("aria-expanded","false");const t=e.closest(".mln__has-child--showing");t&&t.classList.remove("mln__has-child--showing")}),e.style.minHeight=""}})(),document.removeEventListener("hidden.offCanvas",t)})})})}n(),window.addEventListener("mlnResizeEnd",()=>{if(e.classList.contains("mln--navbar-slide-over")&&window.matchMedia(`(min-width: ${t}px)`).matches){const t=e.closest(".l-off-canvas")||e.querySelector(".mln__child__collapse");t&&removeTrapKeyboardHandlers(t),e.style.minHeight=""}else n()})}),e},multilevelNavSlideOver=(e,t)=>{const l=document.querySelectorAll(e),n=[];return l.forEach(e=>{const l=multilevelSlideOverSetup(e,t);l&&n.push(l)}),n};"undefined"!=typeof jQuery&&(jQuery.fn.multilevelNavSlideOver=function(e){return this.each(function(){multilevelSlideOverSetup(this,e)})});//# sourceMappingURL=multilevel-nav-slide-over.min.js.map
